{% extends "base.html" %}
{% block content %}

<section class="hero-section">
  <div class="hero-content">
    <h2>Recognition made <span class="gradient-text">Beautiful</span> âœ¨</h2>
    <p>A seamless pipeline to capture, train, verify, and reward your users with AI-powered recognition.</p>
    <div class="tech-stack">
      <div class="tech-item"><span class="dot-ind python"></span>Python</div>
      <div class="tech-item"><span class="dot-ind cv"></span>OpenCV</div>
      <div class="tech-item"><span class="dot-ind flask"></span>Flask</div>
    </div>
  </div>

  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-value" id="metricUsers">0</div>
      <div class="stat-label">Users Registered</div>
    </div>
    <div class="stat-card">
      <div class="stat-value" id="metricModel">--</div>
      <div class="stat-label">Model Status</div>
    </div>
    <div class="stat-card">
      <div class="stat-value" id="metricAwards">0</div>
      <div class="stat-label">Awards Given</div>
    </div>
  </div>
</section>

<!-- Camera Section -->
<section class="camera-section">
  <div class="camera-card">
    <div class="card-header">
      <div class="status-indicator">
        <span class="status-dot" id="camStatusDot"></span>
        <span id="camStatusText">Camera Offline</span>
      </div>
      <div class="camera-controls">
        <select id="videoSource" class="cam-select"></select>
        <button id="btnToggleCam" class="btn btn-sm" onclick="toggleCamera()">
          <span class="btn-text">Start Camera</span>
        </button>
      </div>
    </div>

    <div class="camera-view">
      <video id="cam" autoplay playsinline muted></video>
      <canvas id="overlay"></canvas>
      <div id="scanLine" class="scan-line-active" style="display:none"></div>
    </div>

    <div class="camera-footer">
      <div id="status" class="status-message">Initializing system...</div>
      <div class="perf-stats">
        <span id="perfCounter">0ms</span>
      </div>
    </div>
  </div>
</section>

<div class="dashboard-grid">
  <!-- Register Card -->
  <div class="action-card card-register">
    <div class="card-header">
      <div class="step-badge">01</div>
      <h3>Register User</h3>
    </div>
    <p class="card-desc">Capture face data for a new user.</p>

    <div class="input-group">
      <input id="regName" type="text" placeholder="Full Name" autocomplete="off" />
      <input id="regEmail" type="email" placeholder="Email Address (Optional)" autocomplete="off" />
    </div>

    <button class="btn btn-register" onclick="registerUser()" id="btnRegister">
      <span class="btn-text">Capture Face</span>
      <span class="btn-icon">ğŸ“¸</span>
    </button>
    <div class="status-msg" id="regStatus"></div>
  </div>

  <!-- Train Card -->
  <div class="action-card card-train">
    <div class="card-header">
      <div class="step-badge">02</div>
      <h3>Train Model</h3>
    </div>
    <p class="card-desc">Update the AI with new face data.</p>

    <div class="train-visual">
      <div class="pulse-ring"></div>
      <span class="icon">ğŸ§ </span>
    </div>

    <button class="btn btn-train" onclick="trainModel()" id="btnTrain">
      <span class="btn-text">Train Model</span>
      <span class="btn-icon">âš¡</span>
    </button>
    <div class="status-msg" id="trainStatus">Ready to train</div>
  </div>

  <!-- Verify Card -->
  <div class="action-card card-verify">
    <div class="card-header">
      <div class="step-badge">03</div>
      <h3>Verify Identity</h3>
    </div>
    <p class="card-desc">Check if a face matches the database.</p>

    <div class="verify-box">
      <div class="scan-line"></div>
      <span class="icon">ğŸ”</span>
    </div>

    <div class="verify-actions">
      <button class="btn btn-verify" onclick="verifyFace()" id="btnVerify">
        <span class="btn-text">Verify Face</span>
        <span class="btn-icon">ğŸ”“</span>
      </button>
      <button class="btn btn-cancel" onclick="cancelVerify()" id="btnCancelVerify">
        <span class="btn-text">Cancel</span>
        <span class="btn-icon">âœ•</span>
      </button>
    </div>
    <div class="result-box" id="verifyResult">Waiting for input...</div>
  </div>

  <!-- Award Card -->
  <div class="action-card card-award">
    <div class="card-header">
      <div class="step-badge">04</div>
      <h3>Generate Award</h3>
    </div>
    <p class="card-desc">Create a certificate for the verified user.</p>

    <div class="input-group">
      <input id="awardName" type="text" placeholder="User Name (Verify first)" readonly />
      <input id="awardTitle" type="text" placeholder="Award Title (e.g. Employee of the Month)" />
    </div>

    <button class="btn btn-award" onclick="generateAward()" id="btnAward">
      <span class="btn-text">Generate Certificate</span>
      <span class="btn-icon">ğŸ“</span>
    </button>
    <div class="result-box" id="awardResult">No certificate yet</div>
  </div>
</div>

<footer class="main-footer">
  <p>Face Award System &copy; 2026. Built for excellence.</p>
</footer>

{% endblock %}